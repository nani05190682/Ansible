

1. Create a New User

This playbook creates a user with sudo privileges.

---
- name: Create a new user
  hosts: all
  become: yes

  tasks:
    - name: Add user 'john'
      user:
        name: john
        state: present
        groups: sudo
        shell: /bin/bash

2. Install Packages (Apache)

This installs Apache on Debian-based systems.

---
- name: Install Apache web server
  hosts: webservers
  become: yes

  tasks:
    - name: Install Apache
      apt:
        name: apache2
        state: present
        update_cache: yes

3. Manage Services (Start/Enable a Service)

This starts the SSH service and ensures it runs at boot.

---
- name: Start and enable SSH service
  hosts: all
  become: yes

  tasks:
    - name: Ensure SSH is running and enabled
      service:
        name: ssh
        state: started
        enabled: yes

4. Copy Files to Remote Hosts

This playbook copies an HTML file to a web serverâ€™s document root.

---
- name: Copy HTML file to web server
  hosts: webservers
  become: yes

  tasks:
    - name: Copy index.html to /var/www/html/
      copy:
        src: /local/path/index.html
        dest: /var/www/html/index.html
        mode: '0644'

5. Update System Packages

This playbook updates all packages on remote hosts.

---
- name: Update all packages
  hosts: all
  become: yes

  tasks:
    - name: Upgrade installed packages
      apt:
        upgrade: dist
        update_cache: yes

6. Reboot Servers

This reboots all target servers and waits for them to come back online.

---
- name: Reboot servers
  hosts: all
  become: yes

  tasks:
    - name: Reboot the server
      reboot:
        reboot_timeout: 300

7. Check Disk Usage

This checks the available disk space on remote hosts.

---
- name: Check disk space
  hosts: all

  tasks:
    - name: Run 'df -h' to check disk space
      command: df -h
      register: disk_usage

    - name: Display disk usage
      debug:
        var: disk_usage.stdout_lines

8. Create and Mount a Filesystem

This playbook creates an ext4 filesystem on a disk and mounts it.

---
- name: Create and mount a filesystem
  hosts: all
  become: yes

  tasks:
    - name: Create ext4 filesystem on /dev/sdb1
      filesystem:
        fstype: ext4
        dev: /dev/sdb1

    - name: Mount /dev/sdb1 to /mnt
      mount:
        path: /mnt
        src: /dev/sdb1
        fstype: ext4
        state: mounted

9. Configure Hostname

This playbook sets the hostname for a server.

---
- name: Configure hostname
  hosts: all
  become: yes

  tasks:
    - name: Set the hostname to 'web-server'
      hostname:
        name: web-server

10. Manage Firewall Rules

This playbook adds a firewall rule to allow HTTP traffic.

---
- name: Configure firewall rules
  hosts: webservers
  become: yes

  tasks:
    - name: Allow HTTP through the firewall
      ufw:
        rule: allow
        port: 80
        proto: tcp

